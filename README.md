# О работе программы

## App.py
        В этом файле раелизован алгоритм обработкипотока из 10 кадров и обращаясь к 
    функциям из файла source.py записывает результат а таблицу dataBase.xlsx где для
    каждой камеры отведен отделиный лист.
---
detect ( название листа камер в таблицу dataBase.xlsx, ссылка на камеру)

        Функция работает в цик из 10 тактов, в каждлм из которых происходит обработка 
    одной фотографии из потока.
        Каждый такт начинаеться с анализа изображения с помощью YOLOv8 и после чегоо
    идет обработка полученных данных.
        Результат работы преобразуеться в массив масивов, каждыый из которых имеет 4
    значения: Х нижнего левого угла прямоугольника, Y нижнего левого угла прямоугольника,
    Ширина прямиугольника, Высота прямоугольника. 
        Дальше вызываеться функция compute_overlaps уточняя таблицу dataBase.xlsx
        По прохождению всех тактов вызываеться функция chek_free_space находяая свободные
    места отрисовывает из за счет функции draw_data и возвращает вместе с массивом
    пустых мест.

## dataBase.xlsx
        В этой таблице находиться информация о парковочных местах для каждой камеры
    таким образом:
        У каждой камеры свой лист названный по имени камеры
        В первой строке всегда узазано чисо обращений к листу
        Далее в каждой строке описываеться парковочное место в формате:
    Первый столбец: Х нижнего левого угла прямоугольника
    Второй столбец: Y нижнего левого угла прямоугольника
    Третий столбец: Ширина прямиугольника
    Четвертый столбец: Высота прямоугольника
    Пятый столбец: Количество нахождений машин на этом парковочном месте
    Шестой столбец: Свободн-ли парковочное место сейчас (True/False)
        
## source.py
        В этом файле реализованны вспомогательные функции для обраболтки данных 
    полсе нейросети и записи результатов в таблицу dataBase.xlsx
---
nexStep

        Увеличивает на 1 значение в первой строке (Количество обращений к листу)
---
createData ( Массив который записываеться в лист)

        Функция для инициализации листа. Принемает массив с информацией о парковочныз местах
    и построчно записывает в лист
---
setCameraPac ( имя нового листа )

        Сетер для листа
---
delete_data

        Удаляет всю информацию из листа
---
now_all_space_free

        Усанавливает значение всех 6-ых столбцов в True
---
cheсk_free_space

        Возвращает информацию о всез местах с ометметкой True в виде массива с массивами
---
delete_shit_in_data

        Удаляет парковочные места которые были найденны менее 5 раз, чтобы отсеевать ошибки
    детекции неросети и движущиеся машины
---
get_data

        Формирует массив массивов по информации в листе
---
calculate_iou

        Высчитывает пересечение найденой машины с парковочными местами из таблици и:
        Если пересечение более 60%, коректирует парковочное место, записывая среднее
    значение между парковочным местом и машиной
        Если пересечение более 20%, ставит False в значение свободного места, но не 
    корректирует парковочное место
        В любом другом случае, создаеться новое парковочное место под найденной машиной
---
compute_overlaps

    Вспомогательная функция для calculate_iou, вызывает ее для каждой найденной машины
---
finde_midle

        Находит среднее значение между двуня прямоугольниками и возврашает
---
draw_bbox

        Принемает массив прямоугольников и отрисовывает их на принятом фото, а после возвращает

## bot.py
        В этом файле реализован бот и это являеться запускаемым файлом программы.
---
        Бот отвечает на ключевые слова:
        */start
        *Все адреса
        *add
        И админские команды
        *delete data
---
start

        Приветствует человека заносит его в базу данных, записывая ID чата, для добавления индивидуальных настроик. Выдает клавиатуру со всеми доступными адресами.
---
Адрес

        При вводе доступного адреса, запускает детекцию (app.py) по каждой камере этому адрессу и присылает фото текущей ситуации по камере.
---
add

        В файл users.xlsx заносится название адреса из первого сообщения и адрес который так назвать и звоторого сообщения.
---
delete data

        Удаляет историю для последней используемой камеры. Обязательно с начала обратьтся к камаре, историю которой нужно удальить
